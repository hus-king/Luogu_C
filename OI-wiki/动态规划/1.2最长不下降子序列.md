# æœ€é•¿ä¸ä¸‹é™å­åºåˆ—
>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $ n $ çš„åºåˆ— $ A $ï¼ˆ$ n \leq 5000 $ï¼‰ï¼Œæ±‚å‡ºä¸€ä¸ªæœ€é•¿çš„ $ A $ çš„å­åºåˆ—ï¼Œæ»¡è¶³è¯¥å­åºåˆ—çš„åä¸€ä¸ªå…ƒç´ ä¸å°äºå‰ä¸€ä¸ªå…ƒç´ ã€‚


## âš¡ ç®—æ³•æ ¸å¿ƒæ€æƒ³

ä½¿ç”¨ **è´ªå¿ƒç­–ç•¥ + äºŒåˆ†æŸ¥æ‰¾**ï¼Œåœ¨ `O(n log n)` æ—¶é—´å†…é«˜æ•ˆæ±‚è§£ï¼š

- ç»´æŠ¤ä¸€ä¸ªæ•°ç»„ `dp`ï¼Œå…¶ä¸­ `dp[i]` è¡¨ç¤ºï¼š**é•¿åº¦ä¸º i+1 çš„æ‰€æœ‰ä¸ä¸‹é™å­åºåˆ—ä¸­ï¼Œæœ«å°¾å…ƒç´ çš„æœ€å°å€¼**ã€‚
- å¯¹äºæ¯ä¸ªæ–°å…ƒç´  `x`ï¼š
  - ä½¿ç”¨ `upper_bound` æ‰¾åˆ°ç¬¬ä¸€ä¸ª **å¤§äº `x`** çš„ä½ç½®ï¼›
  - å¦‚æœæ²¡æ‰¾åˆ°ï¼ˆå³ `x` æ¯”æ‰€æœ‰å½“å‰æœ«å°¾éƒ½å¤§ï¼‰ï¼Œåˆ™æ‰©å±•åºåˆ—ï¼ˆ`push_back(x)`ï¼‰ï¼›
  - å¦åˆ™ï¼Œç”¨ `x` æ›¿æ¢è¯¥ä½ç½®çš„å€¼ â€”â€” ä½¿è¿™ä¸ªé•¿åº¦çš„å­åºåˆ—â€œå°¾å·´æ›´å°â€ï¼Œä¸ºåç»­æ„é€ æ›´é•¿åºåˆ—æä¾›å¯èƒ½ã€‚
- æœ€ç»ˆ `dp.size()` å³ä¸ºç­”æ¡ˆã€‚

> ğŸ“Œ ä¸ºä»€ä¹ˆæ˜¯ `upper_bound`ï¼Ÿ  
> å› ä¸ºæˆ‘ä»¬å…è®¸ç›¸ç­‰ï¼ˆä¸ä¸‹é™ï¼‰ï¼Œæ‰€ä»¥å½“é‡åˆ°ç›¸ç­‰å…ƒç´ æ—¶ï¼Œåº”æ¥åœ¨ç›¸åŒå€¼ä¹‹å â€”â€” `upper_bound` æŸ¥æ‰¾çš„æ˜¯ç¬¬ä¸€ä¸ªâ€œå¤§äºâ€è€Œéâ€œå¤§äºç­‰äºâ€ï¼Œæ­£å¥½ä¿ç•™ç›¸ç­‰å…ƒç´ çš„ç©ºé—´ã€‚

å‚è€ƒä»£ç å¦‚ä¸‹ï¼š

```cpp
vector<int> a(n);
for (int i = 0; i < n; ++i) cin >> a[i];

vector<int> dp;  // åŠ¨æ€å¢é•¿ï¼Œæ— éœ€åˆå§‹åŒ–ä¸º INT_MAX

for (int x : a) {
    auto it = upper_bound(dp.begin(), dp.end(), x);
    if (it == dp.end()) {
        dp.push_back(x);  // x æ¯”æ‰€æœ‰æœ«å°¾éƒ½å¤§ï¼Œå»¶é•¿åºåˆ—
    } else {
        *it = x;          // æ›¿æ¢ç¬¬ä¸€ä¸ªæ¯” x å¤§çš„å…ƒç´ 
    }
}

cout << dp.size() << endl;
}
```
- `dp[i]` çš„å«ä¹‰ï¼š**é•¿åº¦ä¸º i+1 çš„ä¸ä¸‹é™å­åºåˆ—ä¸­ï¼Œæœ«å°¾å…ƒç´ çš„æœ€å°å¯èƒ½å€¼**ã€‚
- ä¾‹å¦‚ï¼š`dp[0]` è¡¨ç¤ºé•¿åº¦ä¸º 1 çš„å­åºåˆ—æœ«å°¾æœ€å°å€¼ï¼›
- `dp[1]` è¡¨ç¤ºé•¿åº¦ä¸º 2 çš„å­åºåˆ—æœ«å°¾æœ€å°å€¼ï¼›
- â€¦ä»¥æ­¤ç±»æ¨ã€‚


### æ³¨ï¼š

è‹¥éœ€è¦æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼Œéœ€è¦å°† `upper_bound` å‡½æ•°æ”¹ä¸º `lower_bound`
è‹¥éœ€è¦æœ€é•¿ä¸ä¸Šå‡å­åºåˆ—ï¼Œéœ€è¦å°†`upper_bound(dp.begin(), dp.end(), x)`æ”¹ä¸º`upper_bound(dp.begin(), dp.end(), x, greater<int>())`
