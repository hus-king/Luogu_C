# 关联容器

## 1 set

`std::set<type, comparator, allocator>` ： 集合，底层通常由红黑树实现，支持高效的插入、删除和查找操作，且元素唯一且有序。

与数学中的集合类似，set 中的元素是唯一且有序的。插入重复元素时，插入操作会被忽略。

### 1.1 构造函数

```cpp
// 1. 定义一个int类型的空集合 s0
set<int> s0;
// 2. 定义一个int类型的集合 s1，并初始化为10个1; 线性复杂度
set<int> s1{1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
// 3. 复制已有的集合 s1; 线性复杂度
set<int> s2(s1);
// 4. 创建一个s1的拷贝set s3，其内容是s1.begin()至s1.end(); 线性复杂度
set<int> s3(s1.begin(), s1.end());
// 5. 移动s1到新创建的set s4，不发生拷贝; 常数复杂度; 需要 C++11
set<int> s4(std::move(s1));
```

### 1.2 插入与删除操作

1. `insert(value)` ： 插入元素 value，若元素已存在则插入失败，返回一个 pair，第一个元素为指向插入元素的迭代器，第二个元素为布尔值表示插入是否成功

2. `erase(value)` ： 删除元素 value，返回删除的元素个数（0 或 1）

3. `clear()` ： 清空集合内容

4. `erase(first, last)` ： 删除范围 [first, last) 内的元素，返回指向被删除元素下一个位置的迭代器

5. `erase(iterator)` ： 删除迭代器所指位置的元素，返回指向被删除元素下一个位置的迭代器

### 1.3 迭代器

1. `begin()/cbegin()` ： 返回指向集合第一个元素的迭代器

2. `end()/cend()` ： 返回指向集合最后一个元素下一个位置的迭代器,注意是没有元素的

3. `rbegin()/crbegin()` ： 返回指向集合最后一个元素的反向迭代器

4. `rend()/crend()` ： 返回指向集合第一个元素前一个位置的反向迭代器,注意是没有元素的

### 1.4 元素查找

1. `find(value)` ： 查找元素 value，返回指向该元素的迭代器，若未找到则返回 `end()`

2. `count(value)` ： 计算元素 value 出现的次数，set 中元素唯一，返回值为 0 或 1

3. `lower_bound(value)` ： 返回指向第一个不小于 value 的元素的迭代器

4. `upper_bound(value)` ： 返回指向第一个大于 value 的元素的迭代器

5. `empty()` ： 判断集合是否为空，返回布尔值

6. `size()` ： 返回集合中元素的个数

## 2 map

`std::map<key_type, value_type, comparator, allocator>` 是有序键值对容器，它的元素的键是唯一的。搜索、移除和插入操作拥有对数复杂度。map 通常实现为 红黑树。

### 2.1 插入与删除操作

1. 可以直接通过下标操作符插入或修改元素：`map[key] = value;`

2. `insert(pair<key_type, value_type>)` ： 插入键值对，若键已存在则插入失败，返回一个 pair，第一个元素为指向插入元素的迭代器，第二个元素为布尔值表示插入是否成功

3. `erase(key)` ： 删除键为 key 的元素，返回删除的元素个数（0 或 1）

4. `erase(pos)` ： 删除迭代器所指位置的元素，返回指向被删除元素下一个位置的迭代器

5. `clear()` ： 清空容器内容

### 2.2 元素查找

1. `count(key)` ： 计算键 key 出现的次数，map 中键唯一，返回值为 0 或 1

2. `find(key)` ： 查找键为 key 的元素，返回指向该元素的迭代器，若未找到则返回 `end()`

3. `lower_bound(key)` ： 返回指向第一个键不小于 key 的元素的迭代器

4. `upper_bound(key)` ： 返回指向第一个键大于 key 的元素的迭代器

## 自定义比较函数

set 在默认情况下的比较函数为 <，即按升序排列元素。我们可以通过自定义比较函数来改变元素的排序方式。例如，按降序排列：

```cpp
struct cmp {
    bool operator()(const int &a, const int &b) const {
        return a > b; // 降序排列
    }
};

set<int, cmp> s; // 使用自定义比较函数的set
```

对于其他关联容器（如 map），也可以类似地自定义比较函数。